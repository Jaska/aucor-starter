{"version":3,"sources":["../node_modules/svgxuse/svgxuse.js","../node_modules/objectFitPolyfill/dist/objectFitPolyfill.min.js","../node_modules/fitvids/dist/fitvids.js","../node_modules/@rqrauhvmra/tobi/js/tobi.js","../assets/scripts/components/menu-dropdown.js","../assets/scripts/components/menu-toggle.js","../assets/scripts/components/markup-enhancements.js","../assets/scripts/main.js"],"names":["window","addEventListener","checkUseElems","tid","winLoad","cache","Object","create","debouncedCheck","clearTimeout","setTimeout","unobserveChanges","xlinkNS","base","bcr","hash","href","i","isHidden","url","uses","xhr","Request","origin","origin2","inProgressCount","observeIfDone","observer","MutationObserver","observe","document","documentElement","childList","subtree","attributes","disconnect","removeEventListener","ignore","attrUpdateFunc","spec","useEl","setAttributeNS","hasAttribute","setAttribute","onloadFunc","svg","body","x","createElement","onload","innerHTML","responseText","getElementsByTagName","style","position","width","height","overflow","insertBefore","firstChild","onErrorTimeout","onerror","ontimeout","length","getBoundingClientRect","getAttribute","getAttributeNS","split","left","right","top","bottom","undefined","XMLHttpRequest","getOrigin","location","withCredentials","XDomainRequest","open","send","abort","loc","a","protocol","replace","host","readyState","t","navigator","userAgent","match","n","parseInt","o","e","l","d","clientWidth","clientHeight","indexOf","dataset","objectFit","objectPosition","parentNode","getComputedStyle","getPropertyValue","display","className","max-width","max-height","min-width","min-height","margin-top","margin-right","margin-bottom","margin-left","marginTop","marginLeft","Event","querySelectorAll","nodeName","_typeof","toLowerCase","complete","this","objectFitPolyfill","f","exports","module","define","amd","global","self","fitvids","r","s","u","require","Error","code","call","1","selectors","queryAll","el","selector","Array","prototype","slice","toSelectorArray","input","map","trim","filter","hasLength","toString","concat","apply","str","parentSelector","opts","players","containers","div","getElementById","head","appendChild","childNodes","custom","ignored","ignoredSelector","join","forEach","container","video","matches","test","widthAttr","heightAttr","isNaN","aspect","removeAttribute","wrapper","paddingTop","wrap","root","factory","Tobi","userOptions","config","browserWindow","figcaptionId","lightbox","prevButton","nextButton","closeButton","counter","drag","isDraggingX","isDraggingY","pointerDown","lastFocus","firstFocusableEl","lastFocusableEl","offset","offsetTmp","resizeTicking","isYouTubeDependencieLoaded","waitingEls","player","playerId","groupAtts","gallery","slider","sliderElements","elementsLength","currentIndex","groups","newGroup","activeGroup","supportedElements","image","checkSupport","init","figure","figcaption","thumbnail","querySelector","loadingIndicator","opacity","alt","captions","captionsSelector","captionAttribute","textContent","id","loadingIndicatorLabel","onPreload","onLoad","removeChild","onLeave","onCleanup","html","checkType","targetSelector","target","currentTime","autoplayVideo","play","paused","pause","duration","videoClone","cloneNode","removeSources","load","iframe","maxWidth","maxHeight","youtube","iframePlaceholder","YT","Player","videoId","playerVars","controls","rel","playsinline","playVideo","getPlayerState","pauseVideo","entries","obj","ownProps","keys","resArray","getGroupName","remove","callback","groupName","slideIndex","slideEl","zoom","zoomIcon","classList","triggerTobi","isOpen","updateConfig","updateLightbox","index","hideScrollbar","add","close","disabled","activeElement","clearDrag","bindEvents","preload","unbindEvents","focus","type","prev","leave","cleanup","next","updateAfterDrag","movementX","endX","startX","movementY","endY","startY","movementXDistance","Math","abs","movementYDistance","threshold","swipeClose","updateOffset","clickHandler","event","docClose","stopPropagation","keydownHandler","keyCode","shiftKey","preventDefault","touchstartHandler","isIgnoreElement","touches","pageX","pageY","touchmoveHandler","doSwipe","touchendHandler","mousedownHandler","mousemoveHandler","mouseupHandler","checkDependencies","tag","firstScriptTag","src","push","onYouTubePlayerAPIReady","waitingEl","object","hasOwnProperty","JSON","parse","stringify","createSlider","tobiZoom","zoomText","createSlide","createLightbox","navLabel","navText","closeLabel","closeText","requestAnimationFrame","sliderElement","sliderElementContent","innerWidth","transform","round","keyboard","draggable","isTouchDevice","sources","source","contains","nav","dir","focusableEls","name","updateSlider","options","download","downloadText","downloadLabel","rtl","loop","key","els","destroy","groupsEntries","groupsEntrie","currentSlide","selectGroup","currentGroup","component_dropdown_menu","args","hover_timer","settings","defaults","prop","extended","extend","desktop_min_width","menu","open_sub_menu","is_desktop_menu","this_tree_submenus","current_parent","parentElement","isEqualNode","current_descendants","all_open_sub_menus","j","close_sub_menu","parent","open_submenu_with_click","li","toggle","items_with_children","item","caret","touchStartFn","maybeCloseMenuFn","on_link_focus","submenu_below","on_link_blur","links","k","link","findAndRemoveClass","elements","elem","isInsideMenu","nodeType","Node","ELEMENT_NODE","targetInsideMenu","current_list_item","this_parents_li","all_tapped","this_parents_submenu","all_open_submenus","parent_links","p","max","console","log","component_toggle","all_toggles","dispatchEvent","gutenberg_content","responsive_tables_in_content","tables","wrap_old_images_with_caption","figures","wrap_old_aligned_images","aligned_parent","aligned","alignment","imgItems","formats","some","includes","nextElementSibling","caption","innerText","menus","menu_toggles","menu_out_of_bounds","click","tobi","aucor_starter_strings","loading"],"mappings":"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","file":"main.js","sourcesContent":["/*!\n * @copyright Copyright (c) 2017 IcoMoon.io\n * @license   Licensed under MIT license\n *            See https://github.com/Keyamoon/svgxuse\n * @version   1.2.6\n */\n/*jslint browser: true */\n/*global XDomainRequest, MutationObserver, window */\n(function () {\n    \"use strict\";\n    if (typeof window !== \"undefined\" && window.addEventListener) {\n        var cache = Object.create(null); // holds xhr objects to prevent multiple requests\n        var checkUseElems;\n        var tid; // timeout id\n        var debouncedCheck = function () {\n            clearTimeout(tid);\n            tid = setTimeout(checkUseElems, 100);\n        };\n        var unobserveChanges = function () {\n            return;\n        };\n        var observeChanges = function () {\n            var observer;\n            window.addEventListener(\"resize\", debouncedCheck, false);\n            window.addEventListener(\"orientationchange\", debouncedCheck, false);\n            if (window.MutationObserver) {\n                observer = new MutationObserver(debouncedCheck);\n                observer.observe(document.documentElement, {\n                    childList: true,\n                    subtree: true,\n                    attributes: true\n                });\n                unobserveChanges = function () {\n                    try {\n                        observer.disconnect();\n                        window.removeEventListener(\"resize\", debouncedCheck, false);\n                        window.removeEventListener(\"orientationchange\", debouncedCheck, false);\n                    } catch (ignore) {}\n                };\n            } else {\n                document.documentElement.addEventListener(\"DOMSubtreeModified\", debouncedCheck, false);\n                unobserveChanges = function () {\n                    document.documentElement.removeEventListener(\"DOMSubtreeModified\", debouncedCheck, false);\n                    window.removeEventListener(\"resize\", debouncedCheck, false);\n                    window.removeEventListener(\"orientationchange\", debouncedCheck, false);\n                };\n            }\n        };\n        var createRequest = function (url) {\n            // In IE 9, cross origin requests can only be sent using XDomainRequest.\n            // XDomainRequest would fail if CORS headers are not set.\n            // Therefore, XDomainRequest should only be used with cross origin requests.\n            function getOrigin(loc) {\n                var a;\n                if (loc.protocol !== undefined) {\n                    a = loc;\n                } else {\n                    a = document.createElement(\"a\");\n                    a.href = loc;\n                }\n                return a.protocol.replace(/:/g, \"\") + a.host;\n            }\n            var Request;\n            var origin;\n            var origin2;\n            if (window.XMLHttpRequest) {\n                Request = new XMLHttpRequest();\n                origin = getOrigin(location);\n                origin2 = getOrigin(url);\n                if (Request.withCredentials === undefined && origin2 !== \"\" && origin2 !== origin) {\n                    Request = XDomainRequest || undefined;\n                } else {\n                    Request = XMLHttpRequest;\n                }\n            }\n            return Request;\n        };\n        var xlinkNS = \"http://www.w3.org/1999/xlink\";\n        checkUseElems = function () {\n            var base;\n            var bcr;\n            var fallback = \"\"; // optional fallback URL in case no base path to SVG file was given and no symbol definition was found.\n            var hash;\n            var href;\n            var i;\n            var inProgressCount = 0;\n            var isHidden;\n            var Request;\n            var url;\n            var uses;\n            var xhr;\n            function observeIfDone() {\n                // If done with making changes, start watching for chagnes in DOM again\n                inProgressCount -= 1;\n                if (inProgressCount === 0) { // if all xhrs were resolved\n                    unobserveChanges(); // make sure to remove old handlers\n                    observeChanges(); // watch for changes to DOM\n                }\n            }\n            function attrUpdateFunc(spec) {\n                return function () {\n                    if (cache[spec.base] !== true) {\n                        spec.useEl.setAttributeNS(xlinkNS, \"xlink:href\", \"#\" + spec.hash);\n                        if (spec.useEl.hasAttribute(\"href\")) {\n                            spec.useEl.setAttribute(\"href\", \"#\" + spec.hash);\n                        }\n                    }\n                };\n            }\n            function onloadFunc(xhr) {\n                return function () {\n                    var body = document.body;\n                    var x = document.createElement(\"x\");\n                    var svg;\n                    xhr.onload = null;\n                    x.innerHTML = xhr.responseText;\n                    svg = x.getElementsByTagName(\"svg\")[0];\n                    if (svg) {\n                        svg.setAttribute(\"aria-hidden\", \"true\");\n                        svg.style.position = \"absolute\";\n                        svg.style.width = 0;\n                        svg.style.height = 0;\n                        svg.style.overflow = \"hidden\";\n                        body.insertBefore(svg, body.firstChild);\n                    }\n                    observeIfDone();\n                };\n            }\n            function onErrorTimeout(xhr) {\n                return function () {\n                    xhr.onerror = null;\n                    xhr.ontimeout = null;\n                    observeIfDone();\n                };\n            }\n            unobserveChanges(); // stop watching for changes to DOM\n            // find all use elements\n            uses = document.getElementsByTagName(\"use\");\n            for (i = 0; i < uses.length; i += 1) {\n                try {\n                    bcr = uses[i].getBoundingClientRect();\n                } catch (ignore) {\n                    // failed to get bounding rectangle of the use element\n                    bcr = false;\n                }\n                href = uses[i].getAttribute(\"href\")\n                        || uses[i].getAttributeNS(xlinkNS, \"href\")\n                        || uses[i].getAttribute(\"xlink:href\");\n                if (href && href.split) {\n                    url = href.split(\"#\");\n                } else {\n                    url = [\"\", \"\"];\n                }\n                base = url[0];\n                hash = url[1];\n                isHidden = bcr && bcr.left === 0 && bcr.right === 0 && bcr.top === 0 && bcr.bottom === 0;\n                if (bcr && bcr.width === 0 && bcr.height === 0 && !isHidden) {\n                    // the use element is empty\n                    // if there is a reference to an external SVG, try to fetch it\n                    // use the optional fallback URL if there is no reference to an external SVG\n                    if (fallback && !base.length && hash && !document.getElementById(hash)) {\n                        base = fallback;\n                    }\n                    if (uses[i].hasAttribute(\"href\")) {\n                        uses[i].setAttributeNS(xlinkNS, \"xlink:href\", href);\n                    }\n                    if (base.length) {\n                        // schedule updating xlink:href\n                        xhr = cache[base];\n                        if (xhr !== true) {\n                            // true signifies that prepending the SVG was not required\n                            setTimeout(attrUpdateFunc({\n                                useEl: uses[i],\n                                base: base,\n                                hash: hash\n                            }), 0);\n                        }\n                        if (xhr === undefined) {\n                            Request = createRequest(base);\n                            if (Request !== undefined) {\n                                xhr = new Request();\n                                cache[base] = xhr;\n                                xhr.onload = onloadFunc(xhr);\n                                xhr.onerror = onErrorTimeout(xhr);\n                                xhr.ontimeout = onErrorTimeout(xhr);\n                                xhr.open(\"GET\", base);\n                                xhr.send();\n                                inProgressCount += 1;\n                            }\n                        }\n                    }\n                } else {\n                    if (!isHidden) {\n                        if (cache[base] === undefined) {\n                            // remember this URL if the use element was not empty and no request was sent\n                            cache[base] = true;\n                        } else if (cache[base].onload) {\n                            // if it turns out that prepending the SVG is not necessary,\n                            // abort the in-progress xhr.\n                            cache[base].abort();\n                            delete cache[base].onload;\n                            cache[base] = true;\n                        }\n                    } else if (base.length && cache[base]) {\n                        setTimeout(attrUpdateFunc({\n                            useEl: uses[i],\n                            base: base,\n                            hash: hash\n                        }), 0);\n                    }\n                }\n            }\n            uses = \"\";\n            inProgressCount += 1;\n            observeIfDone();\n        };\n        var winLoad;\n        winLoad = function () {\n            window.removeEventListener(\"load\", winLoad, false); // to prevent memory leaks\n            tid = setTimeout(checkUseElems, 0);\n        };\n        if (document.readyState !== \"complete\") {\n            // The load event fires when all resources have finished loading, which allows detecting whether SVG use elements are empty.\n            window.addEventListener(\"load\", winLoad, false);\n        } else {\n            // No need to add a listener if the document is already loaded, initialize immediately.\n            winLoad();\n        }\n    }\n}());\n","!function(){\"use strict\";if(\"undefined\"!=typeof window){var t=window.navigator.userAgent.match(/Edge\\/(\\d{2})\\./),n=!!t&&16<=parseInt(t[1],10);if(!(\"objectFit\"in document.documentElement.style!=!1)||n){var o=function(t,e,i){var n,o,l,a,d;if((i=i.split(\" \")).length<2&&(i[1]=i[0]),\"x\"===t)n=i[0],o=i[1],l=\"left\",a=\"right\",d=e.clientWidth;else{if(\"y\"!==t)return;n=i[1],o=i[0],l=\"top\",a=\"bottom\",d=e.clientHeight}if(n!==l&&o!==l){if(n!==a&&o!==a)return\"center\"===n||\"50%\"===n?(e.style[l]=\"50%\",void(e.style[\"margin-\"+l]=d/-2+\"px\")):void(0<=n.indexOf(\"%\")?(n=parseInt(n))<50?(e.style[l]=n+\"%\",e.style[\"margin-\"+l]=d*(n/-100)+\"px\"):(n=100-n,e.style[a]=n+\"%\",e.style[\"margin-\"+a]=d*(n/-100)+\"px\"):e.style[l]=n);e.style[a]=\"0\"}else e.style[l]=\"0\"},l=function(t){var e=t.dataset?t.dataset.objectFit:t.getAttribute(\"data-object-fit\"),i=t.dataset?t.dataset.objectPosition:t.getAttribute(\"data-object-position\");e=e||\"cover\",i=i||\"50% 50%\";var n=t.parentNode;return function(t){var e=window.getComputedStyle(t,null),i=e.getPropertyValue(\"position\"),n=e.getPropertyValue(\"overflow\"),o=e.getPropertyValue(\"display\");i&&\"static\"!==i||(t.style.position=\"relative\"),\"hidden\"!==n&&(t.style.overflow=\"hidden\"),o&&\"inline\"!==o||(t.style.display=\"block\"),0===t.clientHeight&&(t.style.height=\"100%\"),-1===t.className.indexOf(\"object-fit-polyfill\")&&(t.className=t.className+\" object-fit-polyfill\")}(n),function(t){var e=window.getComputedStyle(t,null),i={\"max-width\":\"none\",\"max-height\":\"none\",\"min-width\":\"0px\",\"min-height\":\"0px\",top:\"auto\",right:\"auto\",bottom:\"auto\",left:\"auto\",\"margin-top\":\"0px\",\"margin-right\":\"0px\",\"margin-bottom\":\"0px\",\"margin-left\":\"0px\"};for(var n in i)e.getPropertyValue(n)!==i[n]&&(t.style[n]=i[n])}(t),t.style.position=\"absolute\",t.style.width=\"auto\",t.style.height=\"auto\",\"scale-down\"===e&&(e=t.clientWidth<n.clientWidth&&t.clientHeight<n.clientHeight?\"none\":\"contain\"),\"none\"===e?(o(\"x\",t,i),void o(\"y\",t,i)):\"fill\"===e?(t.style.width=\"100%\",t.style.height=\"100%\",o(\"x\",t,i),void o(\"y\",t,i)):(t.style.height=\"100%\",void(\"cover\"===e&&t.clientWidth>n.clientWidth||\"contain\"===e&&t.clientWidth<n.clientWidth?(t.style.top=\"0\",t.style.marginTop=\"0\",o(\"x\",t,i)):(t.style.width=\"100%\",t.style.height=\"auto\",t.style.left=\"0\",t.style.marginLeft=\"0\",o(\"y\",t,i))))},e=function(t){if(void 0===t||t instanceof Event)t=document.querySelectorAll(\"[data-object-fit]\");else if(t&&t.nodeName)t=[t];else{if(\"object\"!=typeof t||!t.length||!t[0].nodeName)return!1;t=t}for(var e=0;e<t.length;e++)if(t[e].nodeName){var i=t[e].nodeName.toLowerCase();if(\"img\"===i){if(n)continue;t[e].complete?l(t[e]):t[e].addEventListener(\"load\",function(){l(this)})}else\"video\"===i?0<t[e].readyState?l(t[e]):t[e].addEventListener(\"loadedmetadata\",function(){l(this)}):l(t[e])}return!0};\"loading\"===document.readyState?document.addEventListener(\"DOMContentLoaded\",e):e(),window.addEventListener(\"resize\",e),window.objectFitPolyfill=e}else window.objectFitPolyfill=function(){return!1}}}();","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.fitvids = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar selectors = [\n  'iframe[src*=\"player.vimeo.com\"]',\n  'iframe[src*=\"youtube.com\"]',\n  'iframe[src*=\"youtube-nocookie.com\"]',\n  'iframe[src*=\"kickstarter.com\"][src*=\"video.html\"]',\n  \"object\"\n];\n\nvar css =\n  \".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}\";\n\nmodule.exports = function(parentSelector, opts) {\n  parentSelector = parentSelector || \"body\";\n  opts = opts || {};\n\n  if (isObject(parentSelector)) {\n    opts = parentSelector;\n    parentSelector = \"body\";\n  }\n\n  opts.ignore = opts.ignore || \"\";\n  opts.players = opts.players || \"\";\n\n  var containers = queryAll(parentSelector);\n  if (!hasLength(containers)) return;\n\n  if (!document.getElementById(\"fit-vids-style\")) {\n    var head = document.head || document.getElementsByTagName(\"head\")[0];\n    head.appendChild(styles());\n  }\n\n  var custom = toSelectorArray(opts.players);\n  var ignored = toSelectorArray(opts.ignore);\n  var ignoredSelector = ignored.length > 0 ? ignored.join() : null;\n  var selector = selectors.concat(custom).join();\n\n  if (!hasLength(selector)) {\n    return;\n  }\n\n  containers.forEach(function(container) {\n    var videos = queryAll(container, selector);\n\n    videos.forEach(function(video) {\n      if (ignoredSelector && video.matches(ignoredSelector)) {\n        return;\n      }\n      wrap(video);\n    });\n  });\n}\n\nfunction queryAll(el, selector) {\n  if (typeof el === \"string\") {\n    selector = el;\n    el = document;\n  }\n  return Array.prototype.slice.call(el.querySelectorAll(selector));\n}\n\nfunction toSelectorArray(input) {\n  if (typeof input === \"string\") {\n    return input\n      .split(\",\")\n      .map(trim)\n      .filter(hasLength);\n  } else if (isArray(input)) {\n    return flatten(input.map(toSelectorArray).filter(hasLength));\n  }\n  return input || [];\n}\n\nfunction wrap(el) {\n  if (/fluid-width-video-wrapper/.test(el.parentNode.className)) {\n    return;\n  }\n\n  var widthAttr = parseInt(el.getAttribute(\"width\"), 10);\n  var heightAttr = parseInt(el.getAttribute(\"height\"), 10);\n\n  var width = !isNaN(widthAttr) ? widthAttr : el.clientWidth;\n  var height = !isNaN(heightAttr) ? heightAttr : el.clientHeight;\n  var aspect = height / width;\n\n  el.removeAttribute(\"width\");\n  el.removeAttribute(\"height\");\n\n  var wrapper = document.createElement(\"div\");\n  el.parentNode.insertBefore(wrapper, el);\n  wrapper.className = \"fluid-width-video-wrapper\";\n  wrapper.style.paddingTop = aspect * 100 + \"%\";\n  wrapper.appendChild(el);\n}\n\nfunction styles() {\n  var div = document.createElement(\"div\");\n  div.innerHTML = '<p>x</p><style id=\"fit-vids-style\">' + css + \"</style>\";\n  return div.childNodes[1];\n}\n\nfunction hasLength(input) {\n  return input.length > 0;\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, \"\");\n}\n\nfunction flatten(input) {\n  return [].concat.apply([], input);\n}\n\nfunction isObject(input) {\n  return Object.prototype.toString.call(input) === \"[object Object]\";\n}\n\nfunction isArray(input) {\n  return Object.prototype.toString.call(input) === \"[object Array]\";\n}\n\n},{}]},{},[1])(1)\n});\n","/**\r\n * Tobi\r\n *\r\n * @author rqrauhvmra\r\n * @version 1.9.0\r\n * @url https://github.com/rqrauhvmra/Tobi\r\n *\r\n * MIT License\r\n */\r\n(function (root, factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define(factory)\r\n  } else if (typeof module === 'object' && module.exports) {\r\n    // Node. Does not work with strict CommonJS, but\r\n    // only CommonJS-like environments that support module.exports,\r\n    // like Node.\r\n    module.exports = factory()\r\n  } else {\r\n    // Browser globals (root is window)\r\n    root.Tobi = factory()\r\n  }\r\n}(this, function () {\r\n  'use strict'\r\n\r\n  const Tobi = function Tobi (userOptions) {\r\n    /**\r\n     * Global variables\r\n     *\r\n     */\r\n    let config = {}\r\n    const browserWindow = window\r\n    let figcaptionId = 0\r\n    let lightbox = null\r\n    let prevButton = null\r\n    let nextButton = null\r\n    let closeButton = null\r\n    let counter = null\r\n    let drag = {}\r\n    let isDraggingX = false\r\n    let isDraggingY = false\r\n    let pointerDown = false\r\n    let lastFocus = null\r\n    let firstFocusableEl = null\r\n    let lastFocusableEl = null\r\n    let offset = null\r\n    let offsetTmp = null\r\n    let resizeTicking = false\r\n    let isYouTubeDependencieLoaded = false\r\n    const waitingEls = []\r\n    const player = []\r\n    let playerId = 0\r\n    const groupAtts = {\r\n      gallery: [],\r\n      slider: null,\r\n      sliderElements: [],\r\n      elementsLength: 0,\r\n      currentIndex: 0,\r\n      x: 0\r\n    }\r\n    let groups = {}\r\n    let newGroup = null\r\n    let activeGroup = null\r\n\r\n    /**\r\n     * Merge default options with user options\r\n     *\r\n     * @param {Object} userOptions - Optional user options\r\n     * @returns {Object} - Custom options\r\n     */\r\n    const mergeOptions = function mergeOptions (userOptions) {\r\n      // Default options\r\n      const options = {\r\n        selector: '.lightbox',\r\n        captions: true,\r\n        captionsSelector: 'img',\r\n        captionAttribute: 'alt',\r\n        nav: 'auto',\r\n        navText: [\r\n          '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewbox=\"0 0 24 24\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M14 18l-6-6 6-6\"/></svg>',\r\n          '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewbox=\"0 0 24 24\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M10 6l6 6-6 6\"/></svg>'\r\n        ],\r\n        navLabel: [\r\n          'Previous image',\r\n          'Next image'\r\n        ],\r\n        close: true,\r\n        closeText: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewbox=\"0 0 24 24\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M6 6l12 12M6 18L18 6\"/></svg>',\r\n        closeLabel: 'Close lightbox',\r\n        loadingIndicatorLabel: 'Image loading',\r\n        counter: true,\r\n        download: false, // TODO\r\n        downloadText: '', // TODO\r\n        downloadLabel: 'Download image', // TODO\r\n        keyboard: true,\r\n        zoom: true,\r\n        zoomText: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M21 16v5h-5\"/><path d=\"M8 21H3v-5\"/><path d=\"M16 3h5v5\"/><path d=\"M3 8V3h5\"/></svg>',\r\n        docClose: true,\r\n        swipeClose: true,\r\n        hideScrollbar: true,\r\n        draggable: true,\r\n        threshold: 100,\r\n        rtl: false, // TODO\r\n        loop: false, // TODO\r\n        autoplayVideo: false\r\n      }\r\n\r\n      if (userOptions) {\r\n        Object.keys(userOptions).forEach(function (key) {\r\n          options[key] = userOptions[key]\r\n        })\r\n      }\r\n\r\n      return options\r\n    }\r\n\r\n    /**\r\n     * Types - you can add new type to support something new\r\n     *\r\n     */\r\n    const supportedElements = {\r\n      image: {\r\n        checkSupport: function (el) {\r\n          return !el.hasAttribute('data-type') && el.href.match(/\\.(png|jpe?g|tiff|tif|gif|bmp|webp|svg|ico)(\\?.*)?$/i)\r\n        },\r\n\r\n        init: function (el, container) {\r\n          const figure = document.createElement('figure')\r\n          const figcaption = document.createElement('figcaption')\r\n          const image = document.createElement('img')\r\n          const thumbnail = el.querySelector('img')\r\n          const loadingIndicator = document.createElement('div')\r\n\r\n          image.style.opacity = '0'\r\n\r\n          if (thumbnail) {\r\n            image.alt = thumbnail.alt || ''\r\n          }\r\n\r\n          image.setAttribute('src', '')\r\n          image.setAttribute('data-src', el.href)\r\n\r\n          // Add image to figure\r\n          figure.appendChild(image)\r\n\r\n          // Create figcaption\r\n          if (config.captions) {\r\n            figcaption.style.opacity = '0'\r\n\r\n            if (config.captionsSelector === 'self' && el.getAttribute(config.captionAttribute)) {\r\n              figcaption.textContent = el.getAttribute(config.captionAttribute)\r\n            } else if (config.captionsSelector === 'img' && thumbnail && thumbnail.getAttribute(config.captionAttribute)) {\r\n              figcaption.textContent = thumbnail.getAttribute(config.captionAttribute)\r\n            }\r\n\r\n            if (figcaption.textContent) {\r\n              figcaption.id = 'tobi-figcaption-' + figcaptionId\r\n              figure.appendChild(figcaption)\r\n\r\n              image.setAttribute('aria-labelledby', figcaption.id)\r\n\r\n              ++figcaptionId\r\n            }\r\n          }\r\n\r\n          // Add figure to container\r\n          container.appendChild(figure)\r\n\r\n          // Create loading indicator\r\n          loadingIndicator.className = 'tobi-loader'\r\n          loadingIndicator.setAttribute('role', 'progressbar')\r\n          loadingIndicator.setAttribute('aria-label', config.loadingIndicatorLabel)\r\n\r\n          // Add loading indicator to container\r\n          container.appendChild(loadingIndicator)\r\n\r\n          // Register type\r\n          container.setAttribute('data-type', 'image')\r\n        },\r\n\r\n        onPreload: function (container) {\r\n          // Same as preload\r\n          supportedElements.image.onLoad(container)\r\n        },\r\n\r\n        onLoad: function (container) {\r\n          const image = container.querySelector('img')\r\n\r\n          if (!image.hasAttribute('data-src')) {\r\n            return\r\n          }\r\n\r\n          const figcaption = container.querySelector('figcaption')\r\n          const loadingIndicator = container.querySelector('.tobi-loader')\r\n\r\n          image.onload = function () {\r\n            container.removeChild(loadingIndicator)\r\n            image.style.opacity = '1'\r\n\r\n            if (figcaption) {\r\n              figcaption.style.opacity = '1'\r\n            }\r\n          }\r\n\r\n          image.setAttribute('src', image.getAttribute('data-src'))\r\n          image.removeAttribute('data-src')\r\n        },\r\n\r\n        onLeave: function (container) {\r\n          // Nothing\r\n        },\r\n\r\n        onCleanup: function (container) {\r\n          // Nothing\r\n        }\r\n      },\r\n\r\n      html: {\r\n        checkSupport: function (el) {\r\n          return checkType(el, 'html')\r\n        },\r\n\r\n        init: function (el, container) {\r\n          const targetSelector = el.hasAttribute('href') ? el.getAttribute('href') : el.getAttribute('data-target')\r\n          const target = document.querySelector(targetSelector)\r\n\r\n          if (!target) {\r\n            throw new Error('Ups, I can\\'t find the target ' + targetSelector + '.')\r\n          }\r\n\r\n          // Add content to container\r\n          container.appendChild(target)\r\n\r\n          // Register type\r\n          container.setAttribute('data-type', 'html')\r\n        },\r\n\r\n        onPreload: function (container) {\r\n          // Nothing\r\n        },\r\n\r\n        onLoad: function (container) {\r\n          const video = container.querySelector('video')\r\n\r\n          if (video) {\r\n            if (video.hasAttribute('data-time') && video.readyState > 0) {\r\n              // Continue where video was stopped\r\n              video.currentTime = video.getAttribute('data-time')\r\n            }\r\n\r\n            if (config.autoplayVideo) {\r\n              // Start playback (and loading if necessary)\r\n              video.play()\r\n            }\r\n          }\r\n        },\r\n\r\n        onLeave: function (container) {\r\n          const video = container.querySelector('video')\r\n\r\n          if (video) {\r\n            if (!video.paused) {\r\n              // Stop if video is playing\r\n              video.pause()\r\n            }\r\n\r\n            // Backup currentTime (needed for revisit)\r\n            if (video.readyState > 0) {\r\n              video.setAttribute('data-time', video.currentTime)\r\n            }\r\n          }\r\n        },\r\n\r\n        onCleanup: function (container) {\r\n          const video = container.querySelector('video')\r\n\r\n          if (video) {\r\n            if (video.readyState > 0 && video.readyState < 3 && video.duration !== video.currentTime) {\r\n              // Some data has been loaded but not the whole package.\r\n              // In order to save bandwidth, stop downloading as soon as possible.\r\n              const videoClone = video.cloneNode(true)\r\n\r\n              removeSources(video)\r\n              video.load()\r\n\r\n              video.parentNode.removeChild(video)\r\n\r\n              container.appendChild(videoClone)\r\n            }\r\n          }\r\n        }\r\n      },\r\n\r\n      iframe: {\r\n        checkSupport: function (el) {\r\n          return checkType(el, 'iframe')\r\n        },\r\n\r\n        init: function (el, container) {\r\n          const iframe = document.createElement('iframe')\r\n          const href = el.hasAttribute('href') ? el.getAttribute('href') : el.getAttribute('data-target')\r\n\r\n          iframe.setAttribute('frameborder', '0')\r\n          iframe.setAttribute('src', '')\r\n          iframe.setAttribute('data-src', href)\r\n\r\n          if (el.getAttribute('data-width')) {\r\n            iframe.style.maxWidth = el.getAttribute('data-width') + 'px'\r\n          }\r\n\r\n          if (el.getAttribute('data-height')) {\r\n            iframe.style.maxHeight = el.getAttribute('data-height') + 'px'\r\n          }\r\n\r\n          // Add iframe to container\r\n          container.appendChild(iframe)\r\n\r\n          // Register type\r\n          container.setAttribute('data-type', 'iframe')\r\n        },\r\n\r\n        onPreload: function (container) {\r\n          // Nothing\r\n        },\r\n\r\n        onLoad: function (container) {\r\n          const iframe = container.querySelector('iframe')\r\n\r\n          iframe.setAttribute('src', iframe.getAttribute('data-src'))\r\n        },\r\n\r\n        onLeave: function (container) {\r\n          // Nothing\r\n        },\r\n\r\n        onCleanup: function (container) {\r\n          // Nothing\r\n        }\r\n      },\r\n\r\n      youtube: {\r\n        checkSupport: function (el) {\r\n          return checkType(el, 'youtube')\r\n        },\r\n\r\n        init: function (el, container) {\r\n          const iframePlaceholder = document.createElement('div')\r\n\r\n          // Add iframePlaceholder to container\r\n          container.appendChild(iframePlaceholder)\r\n\r\n          player[playerId] = new window.YT.Player(iframePlaceholder, {\r\n            host: 'https://www.youtube-nocookie.com',\r\n            height: el.getAttribute('data-height') || '360',\r\n            width: el.getAttribute('data-width') || '640',\r\n            videoId: el.getAttribute('data-id'),\r\n            playerVars: {\r\n              controls: el.getAttribute('data-controls') || 1,\r\n              rel: 0,\r\n              playsinline: 1\r\n            }\r\n          })\r\n\r\n          // Set player ID\r\n          container.setAttribute('data-player', playerId)\r\n\r\n          // Register type\r\n          container.setAttribute('data-type', 'youtube')\r\n\r\n          playerId++\r\n        },\r\n\r\n        onPreload: function (container) {\r\n          // Nothing\r\n        },\r\n\r\n        onLoad: function (container) {\r\n          if (config.autoplayVideo) {\r\n            player[container.getAttribute('data-player')].playVideo()\r\n          }\r\n        },\r\n\r\n        onLeave: function (container) {\r\n          if (player[container.getAttribute('data-player')].getPlayerState() === 1) {\r\n            player[container.getAttribute('data-player')].pauseVideo()\r\n          }\r\n        },\r\n\r\n        onCleanup: function (container) {\r\n          if (player[container.getAttribute('data-player')].getPlayerState() === 1) {\r\n            player[container.getAttribute('data-player')].pauseVideo()\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add compatible Object.entries support for IE\r\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries#Polyfill\r\n     *\r\n     */\r\n    if (!Object.entries) {\r\n      Object.entries = function (obj) {\r\n        const ownProps = Object.keys(obj)\r\n        let i = ownProps.length\r\n        const resArray = new Array(i)\r\n\r\n        while (i--) {\r\n          resArray[i] = [ownProps[i], obj[ownProps[i]]]\r\n        }\r\n\r\n        return resArray\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Init\r\n     *\r\n     */\r\n    const init = function init (userOptions) {\r\n      // Merge user options into defaults\r\n      config = mergeOptions(userOptions)\r\n\r\n      // Check if the lightbox already exists\r\n      if (!lightbox) {\r\n        createLightbox()\r\n      }\r\n\r\n      // Get a list of all elements within the document\r\n      const els = document.querySelectorAll(config.selector)\r\n\r\n      if (!els) {\r\n        throw new Error('Ups, I can\\'t find the selector ' + config.selector + '.')\r\n      }\r\n\r\n      // Execute a few things once per element\r\n      Array.prototype.forEach.call(els, function (el) {\r\n        checkDependencies(el)\r\n      })\r\n    }\r\n\r\n    /**\r\n     * Check dependencies\r\n     *\r\n     * @param {HTMLElement} el - Element to add\r\n     * @param {function} callback - Optional callback to call after add\r\n     */\r\n    const checkDependencies = function checkDependencies (el, callback) {\r\n      // Check if there is a YouTube video and if the YouTube iframe-API is ready\r\n      if (document.querySelector('[data-type=\"youtube\"]') !== null && !isYouTubeDependencieLoaded) {\r\n        if (document.getElementById('iframe_api') === null) {\r\n          const tag = document.createElement('script')\r\n          const firstScriptTag = document.getElementsByTagName('script')[0]\r\n\r\n          tag.id = 'iframe_api'\r\n          tag.src = 'https://www.youtube.com/iframe_api'\r\n\r\n          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)\r\n        }\r\n\r\n        if (waitingEls.indexOf(el) === -1) {\r\n          waitingEls.push(el)\r\n        }\r\n\r\n        window.onYouTubePlayerAPIReady = function () {\r\n          Array.prototype.forEach.call(waitingEls, function (waitingEl) {\r\n            add(waitingEl, callback)\r\n          })\r\n\r\n          isYouTubeDependencieLoaded = true\r\n        }\r\n      } else {\r\n        add(el, callback)\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Get group name from element\r\n     *\r\n     * @param {HTMLElement} el\r\n     * @return {string}\r\n     */\r\n    const getGroupName = function getGroupName (el) {\r\n      return el.hasAttribute('data-group') ? el.getAttribute('data-group') : 'default'\r\n    }\r\n\r\n    /**\r\n     * Copy an object. (The secure way)\r\n     *\r\n     * @param {object} object\r\n     * @return {object}\r\n     */\r\n    const copyObject = function copyObject (object) {\r\n      return JSON.parse(JSON.stringify(object))\r\n    }\r\n\r\n    /**\r\n     * Add element\r\n     *\r\n     * @param {HTMLElement} el - Element to add\r\n     * @param {function} callback - Optional callback to call after add\r\n     */\r\n    const add = function add (el, callback) {\r\n      newGroup = getGroupName(el)\r\n\r\n      if (!Object.prototype.hasOwnProperty.call(groups, newGroup)) {\r\n        groups[newGroup] = copyObject(groupAtts)\r\n\r\n        createSlider()\r\n      }\r\n\r\n      // Check if element already exists\r\n      if (groups[newGroup].gallery.indexOf(el) === -1) {\r\n        groups[newGroup].gallery.push(el)\r\n        groups[newGroup].elementsLength++\r\n\r\n        // Set zoom icon if necessary\r\n        if (config.zoom && el.querySelector('img')) {\r\n          const tobiZoom = document.createElement('div')\r\n\r\n          tobiZoom.className = 'tobi-zoom__icon'\r\n          tobiZoom.innerHTML = config.zoomText\r\n\r\n          el.classList.add('tobi-zoom')\r\n          el.appendChild(tobiZoom)\r\n        }\r\n\r\n        // Bind click event handler\r\n        el.addEventListener('click', triggerTobi)\r\n\r\n        createSlide(el)\r\n\r\n        if (isOpen() && newGroup === activeGroup) {\r\n          updateConfig()\r\n          updateLightbox()\r\n        }\r\n\r\n        if (callback) {\r\n          callback.call(this)\r\n        }\r\n      } else {\r\n        throw new Error('Ups, element already added to the lightbox.')\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Remove element\r\n     *\r\n     * @param {HTMLElement} el - Element to remove\r\n     * @param {function} callback - Optional callback to call after remove\r\n     */\r\n    const remove = function add (el, callback) {\r\n      const groupName = getGroupName(el)\r\n\r\n      // Check if element exists\r\n      if (groups[groupName].gallery.indexOf(el) === -1) {\r\n        // TODO\r\n      } else {\r\n        const slideIndex = groups[groupName].gallery.indexOf(el)\r\n        const slideEl = groups[groupName].sliderElements[slideIndex]\r\n\r\n        // TODO If the element to be removed is the currently visible slide\r\n\r\n        // TODO Remove element\r\n        // groups[groupName].gallery.splice(groups[groupName].gallery.indexOf(el)) don't work\r\n        groups[groupName].elementsLength--\r\n\r\n        // Remove zoom icon if necessary\r\n        if (config.zoom && el.querySelector('.tobi-zoom__icon')) {\r\n          const zoomIcon = el.querySelector('.tobi-zoom__icon')\r\n\r\n          zoomIcon.parentNode.classList.remove('tobi-zoom')\r\n          zoomIcon.parentNode.removeChild(zoomIcon)\r\n        }\r\n\r\n        // Unbind click event handler\r\n        el.removeEventListener('click', triggerTobi)\r\n\r\n        // Remove slide\r\n        slideEl.parentNode.removeChild(slideEl)\r\n\r\n        if (isOpen() && groupName === activeGroup) {\r\n          updateConfig()\r\n          updateLightbox()\r\n        }\r\n\r\n        if (callback) {\r\n          callback.call(this)\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Create the lightbox\r\n     *\r\n     */\r\n    const createLightbox = function createLightbox () {\r\n      // Create the lightbox\r\n      lightbox = document.createElement('div')\r\n      lightbox.setAttribute('role', 'dialog')\r\n      lightbox.setAttribute('aria-hidden', 'true')\r\n      lightbox.className = 'tobi'\r\n\r\n      // Create the previous button\r\n      prevButton = document.createElement('button')\r\n      prevButton.className = 'tobi__prev'\r\n      prevButton.setAttribute('type', 'button')\r\n      prevButton.setAttribute('aria-label', config.navLabel[0])\r\n      prevButton.innerHTML = config.navText[0]\r\n      lightbox.appendChild(prevButton)\r\n\r\n      // Create the next button\r\n      nextButton = document.createElement('button')\r\n      nextButton.className = 'tobi__next'\r\n      nextButton.setAttribute('type', 'button')\r\n      nextButton.setAttribute('aria-label', config.navLabel[1])\r\n      nextButton.innerHTML = config.navText[1]\r\n      lightbox.appendChild(nextButton)\r\n\r\n      // Create the close button\r\n      closeButton = document.createElement('button')\r\n      closeButton.className = 'tobi__close'\r\n      closeButton.setAttribute('type', 'button')\r\n      closeButton.setAttribute('aria-label', config.closeLabel)\r\n      closeButton.innerHTML = config.closeText\r\n      lightbox.appendChild(closeButton)\r\n\r\n      // Create the counter\r\n      counter = document.createElement('div')\r\n      counter.className = 'tobi__counter'\r\n      lightbox.appendChild(counter)\r\n\r\n      // Resize event using requestAnimationFrame\r\n      browserWindow.addEventListener('resize', function () {\r\n        if (!resizeTicking) {\r\n          resizeTicking = true\r\n\r\n          browserWindow.requestAnimationFrame(function () {\r\n            updateOffset()\r\n\r\n            resizeTicking = false\r\n          })\r\n        }\r\n      })\r\n\r\n      document.body.appendChild(lightbox)\r\n    }\r\n\r\n    /**\r\n     * Create a slider\r\n     */\r\n    const createSlider = function createSlider () {\r\n      groups[newGroup].slider = document.createElement('div')\r\n      groups[newGroup].slider.className = 'tobi__slider'\r\n      lightbox.appendChild(groups[newGroup].slider)\r\n    }\r\n\r\n    /**\r\n     * Create a slide\r\n     *\r\n     */\r\n    const createSlide = function createSlide (el) {\r\n      // Detect type\r\n      for (let index in supportedElements) { // const index don't work in IE\r\n        if (Object.prototype.hasOwnProperty.call(supportedElements, index)) {\r\n          if (supportedElements[index].checkSupport(el)) {\r\n            // Create slide elements\r\n            const sliderElement = document.createElement('div')\r\n            const sliderElementContent = document.createElement('div')\r\n\r\n            sliderElement.className = 'tobi__slider__slide'\r\n            sliderElement.style.position = 'absolute'\r\n            sliderElement.style.left = groups[newGroup].x * 100 + '%'\r\n            sliderElementContent.className = 'tobi__slider__slide__content'\r\n\r\n            // Create type elements\r\n            supportedElements[index].init(el, sliderElementContent)\r\n\r\n            // Add slide content container to slider element\r\n            sliderElement.appendChild(sliderElementContent)\r\n\r\n            // Add slider element to slider\r\n            groups[newGroup].slider.appendChild(sliderElement)\r\n            groups[newGroup].sliderElements.push(sliderElement)\r\n\r\n            ++groups[newGroup].x\r\n\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Open Tobi\r\n     *\r\n     * @param {number} index - Index to load\r\n     * @param {function} callback - Optional callback to call after open\r\n     */\r\n    const open = function open (index, callback) {\r\n      activeGroup = activeGroup !== null ? activeGroup : newGroup\r\n\r\n      if (!isOpen() && !index) {\r\n        index = 0\r\n      }\r\n\r\n      if (isOpen()) {\r\n        if (!index) {\r\n          throw new Error('Ups, Tobi is aleady open.')\r\n        }\r\n\r\n        if (index === groups[activeGroup].currentIndex) {\r\n          throw new Error('Ups, slide ' + index + ' is already selected.')\r\n        }\r\n      }\r\n\r\n      if (index === -1 || index >= groups[activeGroup].elementsLength) {\r\n        throw new Error('Ups, I can\\'t find slide ' + index + '.')\r\n      }\r\n\r\n      if (config.hideScrollbar) {\r\n        document.documentElement.classList.add('tobi-is-open')\r\n        document.body.classList.add('tobi-is-open')\r\n      }\r\n\r\n      updateConfig()\r\n\r\n      // Hide close if necessary\r\n      if (!config.close) {\r\n        closeButton.disabled = false\r\n        closeButton.setAttribute('aria-hidden', 'true')\r\n      }\r\n\r\n      // Save user’s focus\r\n      lastFocus = document.activeElement\r\n\r\n      // Set current index\r\n      groups[activeGroup].currentIndex = index\r\n\r\n      clearDrag()\r\n      bindEvents()\r\n\r\n      // Load slide\r\n      load(groups[activeGroup].currentIndex)\r\n\r\n      // Makes lightbox appear, too\r\n      lightbox.setAttribute('aria-hidden', 'false')\r\n\r\n      updateLightbox()\r\n\r\n      // Preload previous and next slide\r\n      preload(groups[activeGroup].currentIndex + 1)\r\n      preload(groups[activeGroup].currentIndex - 1)\r\n\r\n      if (callback) {\r\n        callback.call(this)\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Close Tobi\r\n     *\r\n     * @param {function} callback - Optional callback to call after close\r\n     */\r\n    const close = function close (callback) {\r\n      if (!isOpen()) {\r\n        throw new Error('Tobi is already closed.')\r\n      }\r\n\r\n      if (config.hideScrollbar) {\r\n        document.documentElement.classList.remove('tobi-is-open')\r\n        document.body.classList.remove('tobi-is-open')\r\n      }\r\n\r\n      unbindEvents()\r\n\r\n      // Reenable the user’s focus\r\n      lastFocus.focus()\r\n\r\n      // Don't forget to cleanup our current element\r\n      const container = groups[activeGroup].sliderElements[groups[activeGroup].currentIndex].querySelector('.tobi__slider__slide__content')\r\n      const type = container.getAttribute('data-type')\r\n\r\n      supportedElements[type].onLeave(container)\r\n      supportedElements[type].onCleanup(container)\r\n\r\n      lightbox.setAttribute('aria-hidden', 'true')\r\n\r\n      // Reset current index\r\n      groups[activeGroup].currentIndex = 0\r\n\r\n      if (callback) {\r\n        callback.call(this)\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Preload slide\r\n     *\r\n     * @param {number} index - Index to preload\r\n     */\r\n    const preload = function preload (index) {\r\n      if (groups[activeGroup].sliderElements[index] === undefined) {\r\n        return\r\n      }\r\n\r\n      const container = groups[activeGroup].sliderElements[index].querySelector('.tobi__slider__slide__content')\r\n      const type = container.getAttribute('data-type')\r\n\r\n      supportedElements[type].onPreload(container)\r\n    }\r\n\r\n    /**\r\n     * Load slide\r\n     * Will be called when opening the lightbox or moving index\r\n     *\r\n     * @param {number} index - Index to load\r\n     */\r\n    const load = function load (index) {\r\n      if (groups[activeGroup].sliderElements[index] === undefined) {\r\n        return\r\n      }\r\n\r\n      const container = groups[activeGroup].sliderElements[index].querySelector('.tobi__slider__slide__content')\r\n      const type = container.getAttribute('data-type')\r\n\r\n      supportedElements[type].onLoad(container)\r\n    }\r\n\r\n    /**\r\n     * Show the previous slide\r\n     *\r\n     * @param {function} callback - Optional callback function\r\n     */\r\n    const prev = function prev (callback) {\r\n      if (groups[activeGroup].currentIndex > 0) {\r\n        leave(groups[activeGroup].currentIndex)\r\n        load(--groups[activeGroup].currentIndex)\r\n        updateLightbox('left')\r\n        cleanup(groups[activeGroup].currentIndex + 1)\r\n        preload(groups[activeGroup].currentIndex - 1)\r\n\r\n        if (callback) {\r\n          callback.call(this)\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Show the next slide\r\n     *\r\n     * @param {function} callback - Optional callback function\r\n     */\r\n    const next = function next (callback) {\r\n      if (groups[activeGroup].currentIndex < groups[activeGroup].elementsLength - 1) {\r\n        leave(groups[activeGroup].currentIndex)\r\n        load(++groups[activeGroup].currentIndex)\r\n        updateLightbox('right')\r\n        cleanup(groups[activeGroup].currentIndex - 1)\r\n        preload(groups[activeGroup].currentIndex + 1)\r\n\r\n        if (callback) {\r\n          callback.call(this)\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Leave slide\r\n     * Will be called before moving index\r\n     *\r\n     * @param {number} index - Index to leave\r\n     */\r\n    const leave = function leave (index) {\r\n      if (groups[activeGroup].sliderElements[index] === undefined) {\r\n        return\r\n      }\r\n\r\n      const container = groups[activeGroup].sliderElements[index].querySelector('.tobi__slider__slide__content')\r\n      const type = container.getAttribute('data-type')\r\n\r\n      supportedElements[type].onLeave(container)\r\n    }\r\n\r\n    /**\r\n     * Cleanup slide\r\n     * Will be called after moving index\r\n     *\r\n     * @param {number} index - Index to cleanup\r\n     */\r\n    const cleanup = function cleanup (index) {\r\n      if (groups[activeGroup].sliderElements[index] === undefined) {\r\n        return\r\n      }\r\n\r\n      const container = groups[activeGroup].sliderElements[index].querySelector('.tobi__slider__slide__content')\r\n      const type = container.getAttribute('data-type')\r\n\r\n      supportedElements[type].onCleanup(container)\r\n    }\r\n\r\n    /**\r\n     * Update offset\r\n     *\r\n     */\r\n    const updateOffset = function updateOffset () {\r\n      activeGroup = activeGroup !== null ? activeGroup : newGroup\r\n\r\n      offset = -groups[activeGroup].currentIndex * window.innerWidth\r\n\r\n      groups[activeGroup].slider.style.transform = 'translate3d(' + offset + 'px, 0, 0)'\r\n      offsetTmp = offset\r\n    }\r\n\r\n    /**\r\n     * Update counter\r\n     *\r\n     */\r\n    const updateCounter = function updateCounter () {\r\n      counter.textContent = (groups[activeGroup].currentIndex + 1) + '/' + groups[activeGroup].elementsLength\r\n    }\r\n\r\n    /**\r\n     * Set focus to the next slide\r\n     *\r\n     * @param {string} dir - Current slide direction\r\n     */\r\n    const updateFocus = function updateFocus (dir) {\r\n      let focusableEls = null\r\n\r\n      if (config.nav) {\r\n        prevButton.disabled = false\r\n        nextButton.disabled = false\r\n\r\n        if (dir === 'left') {\r\n          prevButton.focus()\r\n        } else {\r\n          nextButton.focus()\r\n        }\r\n\r\n        // If there is only one slide\r\n        if (groups[activeGroup].elementsLength === 1) {\r\n          prevButton.disabled = true\r\n          nextButton.disabled = true\r\n\r\n          if (config.close) {\r\n            closeButton.focus()\r\n          }\r\n        } else {\r\n          // If the first slide is displayed\r\n          if (groups[activeGroup].currentIndex === 0) {\r\n            prevButton.disabled = true\r\n            nextButton.focus()\r\n          }\r\n\r\n          // If the last slide is displayed\r\n          if (groups[activeGroup].currentIndex === groups[activeGroup].elementsLength - 1) {\r\n            nextButton.disabled = true\r\n            prevButton.focus()\r\n          }\r\n        }\r\n      } else if (config.close) {\r\n        closeButton.focus()\r\n      }\r\n\r\n      focusableEls = lightbox.querySelectorAll('.tobi > button:not(:disabled)')\r\n      firstFocusableEl = focusableEls[0]\r\n      lastFocusableEl = focusableEls.length === 1 ? focusableEls[0] : focusableEls[focusableEls.length - 1]\r\n    }\r\n\r\n    /**\r\n     * Clear drag after touchend and mousup event\r\n     *\r\n     */\r\n    const clearDrag = function clearDrag () {\r\n      drag = {\r\n        startX: 0,\r\n        endX: 0,\r\n        startY: 0,\r\n        endY: 0\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Recalculate drag / swipe event\r\n     *\r\n     */\r\n    const updateAfterDrag = function updateAfterDrag () {\r\n      const movementX = drag.endX - drag.startX\r\n      const movementY = drag.endY - drag.startY\r\n      const movementXDistance = Math.abs(movementX)\r\n      const movementYDistance = Math.abs(movementY)\r\n\r\n      if (movementX > 0 && movementXDistance > config.threshold && groups[activeGroup].currentIndex > 0) {\r\n        prev()\r\n      } else if (movementX < 0 && movementXDistance > config.threshold && groups[activeGroup].currentIndex !== groups[activeGroup].elementsLength - 1) {\r\n        next()\r\n      } else if (movementY < 0 && movementYDistance > config.threshold && config.swipeClose) {\r\n        close()\r\n      } else {\r\n        updateOffset()\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Click event handler to trigger Tobi\r\n     *\r\n     */\r\n    const triggerTobi = function click (event) {\r\n      event.preventDefault()\r\n\r\n      activeGroup = getGroupName(this)\r\n\r\n      open(groups[activeGroup].gallery.indexOf(this))\r\n    }\r\n\r\n    /**\r\n     * Click event handler\r\n     *\r\n     */\r\n    const clickHandler = function clickHandler (event) {\r\n      if (event.target === prevButton) {\r\n        prev()\r\n      } else if (event.target === nextButton) {\r\n        next()\r\n      } else if (event.target === closeButton || (event.target.className === 'tobi__slider__slide' && config.docClose)) {\r\n        close()\r\n      }\r\n\r\n      event.stopPropagation()\r\n    }\r\n\r\n    /**\r\n     * Keydown event handler\r\n     *\r\n     * @TODO: Remove the deprecated event.keyCode when Edge support event.code and we drop f*cking IE\r\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode\r\n     */\r\n    const keydownHandler = function keydownHandler (event) {\r\n      if (event.keyCode === 9 || event.code === 'Tab') {\r\n        // `TAB` Key: Navigate to the next / previous focusable element\r\n        if (event.shiftKey) {\r\n          // Step backwards in the tab-order\r\n          if (document.activeElement === firstFocusableEl) {\r\n            lastFocusableEl.focus()\r\n            event.preventDefault()\r\n          }\r\n        } else {\r\n          // Step forward in the tab-order\r\n          if (document.activeElement === lastFocusableEl) {\r\n            firstFocusableEl.focus()\r\n            event.preventDefault()\r\n          }\r\n        }\r\n      } else if (event.keyCode === 27 || event.code === 'Escape') {\r\n        // `ESC` Key: Close Tobi\r\n        event.preventDefault()\r\n        close()\r\n      } else if (event.keyCode === 37 || event.code === 'ArrowLeft') {\r\n        // `PREV` Key: Show the previous slide\r\n        event.preventDefault()\r\n        prev()\r\n      } else if (event.keyCode === 39 || event.code === 'ArrowRight') {\r\n        // `NEXT` Key: Show the next slide\r\n        event.preventDefault()\r\n        next()\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Touchstart event handler\r\n     *\r\n     */\r\n    const touchstartHandler = function touchstartHandler (event) {\r\n      // Prevent dragging / swiping on textareas inputs and selects\r\n      if (isIgnoreElement(event.target)) {\r\n        return\r\n      }\r\n\r\n      event.stopPropagation()\r\n\r\n      pointerDown = true\r\n\r\n      drag.startX = event.touches[0].pageX\r\n      drag.startY = event.touches[0].pageY\r\n\r\n      groups[activeGroup].slider.classList.add('tobi__slider--is-dragging')\r\n    }\r\n\r\n    /**\r\n     * Touchmove event handler\r\n     *\r\n     */\r\n    const touchmoveHandler = function touchmoveHandler (event) {\r\n      event.stopPropagation()\r\n\r\n      if (pointerDown) {\r\n        event.preventDefault()\r\n\r\n        drag.endX = event.touches[0].pageX\r\n        drag.endY = event.touches[0].pageY\r\n\r\n        doSwipe()\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Touchend event handler\r\n     *\r\n     */\r\n    const touchendHandler = function touchendHandler (event) {\r\n      event.stopPropagation()\r\n\r\n      pointerDown = false\r\n\r\n      groups[activeGroup].slider.classList.remove('tobi__slider--is-dragging')\r\n\r\n      if (drag.endX) {\r\n        isDraggingX = false\r\n        isDraggingY = false\r\n\r\n        updateAfterDrag()\r\n      }\r\n\r\n      clearDrag()\r\n    }\r\n\r\n    /**\r\n     * Mousedown event handler\r\n     *\r\n     */\r\n    const mousedownHandler = function mousedownHandler (event) {\r\n      // Prevent dragging / swiping on textareas inputs and selects\r\n      if (isIgnoreElement(event.target)) {\r\n        return\r\n      }\r\n\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n\r\n      pointerDown = true\r\n\r\n      drag.startX = event.pageX\r\n      drag.startY = event.pageY\r\n\r\n      groups[activeGroup].slider.classList.add('tobi__slider--is-dragging')\r\n    }\r\n\r\n    /**\r\n     * Mousemove event handler\r\n     *\r\n     */\r\n    const mousemoveHandler = function mousemoveHandler (event) {\r\n      event.preventDefault()\r\n\r\n      if (pointerDown) {\r\n        drag.endX = event.pageX\r\n        drag.endY = event.pageY\r\n\r\n        doSwipe()\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Mouseup event handler\r\n     *\r\n     */\r\n    const mouseupHandler = function mouseupHandler (event) {\r\n      event.stopPropagation()\r\n\r\n      pointerDown = false\r\n\r\n      groups[activeGroup].slider.classList.remove('tobi__slider--is-dragging')\r\n\r\n      if (drag.endX) {\r\n        isDraggingX = false\r\n        isDraggingY = false\r\n\r\n        updateAfterDrag()\r\n      }\r\n\r\n      clearDrag()\r\n    }\r\n\r\n    /**\r\n     * Decide whether to do horizontal of vertical swipe\r\n     *\r\n     */\r\n    const doSwipe = function doSwipe () {\r\n      if (Math.abs(drag.startX - drag.endX) > 0 && !isDraggingY && config.swipeClose) {\r\n        // Horizontal swipe\r\n        groups[activeGroup].slider.style.transform = 'translate3d(' + (offsetTmp - Math.round(drag.startX - drag.endX)) + 'px, 0, 0)'\r\n\r\n        isDraggingX = true\r\n        isDraggingY = false\r\n      } else if (Math.abs(drag.startY - drag.endY) > 0 && !isDraggingX) {\r\n        // Vertical swipe\r\n        groups[activeGroup].slider.style.transform = 'translate3d(' + (offsetTmp + 'px, -' + Math.round(drag.startY - drag.endY)) + 'px, 0)'\r\n\r\n        isDraggingX = false\r\n        isDraggingY = true\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Bind events\r\n     *\r\n     */\r\n    const bindEvents = function bindEvents () {\r\n      if (config.keyboard) {\r\n        document.addEventListener('keydown', keydownHandler)\r\n      }\r\n\r\n      // Click event\r\n      lightbox.addEventListener('click', clickHandler)\r\n\r\n      if (config.draggable) {\r\n        if (isTouchDevice()) {\r\n          // Touch events\r\n          lightbox.addEventListener('touchstart', touchstartHandler)\r\n          lightbox.addEventListener('touchmove', touchmoveHandler)\r\n          lightbox.addEventListener('touchend', touchendHandler)\r\n        }\r\n\r\n        // Mouse events\r\n        lightbox.addEventListener('mousedown', mousedownHandler)\r\n        lightbox.addEventListener('mouseup', mouseupHandler)\r\n        lightbox.addEventListener('mousemove', mousemoveHandler)\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Unbind events\r\n     *\r\n     */\r\n    const unbindEvents = function unbindEvents () {\r\n      if (config.keyboard) {\r\n        document.removeEventListener('keydown', keydownHandler)\r\n      }\r\n\r\n      // Click event\r\n      lightbox.removeEventListener('click', clickHandler)\r\n\r\n      if (config.draggable) {\r\n        if (isTouchDevice()) {\r\n          // Touch events\r\n          lightbox.removeEventListener('touchstart', touchstartHandler)\r\n          lightbox.removeEventListener('touchmove', touchmoveHandler)\r\n          lightbox.removeEventListener('touchend', touchendHandler)\r\n        }\r\n\r\n        // Mouse events\r\n        lightbox.removeEventListener('mousedown', mousedownHandler)\r\n        lightbox.removeEventListener('mouseup', mouseupHandler)\r\n        lightbox.removeEventListener('mousemove', mousemoveHandler)\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Checks whether element has requested data-type value\r\n     *\r\n     */\r\n    const checkType = function checkType (el, type) {\r\n      return el.getAttribute('data-type') === type\r\n    }\r\n\r\n    /**\r\n     * Remove all `src` attributes\r\n     *\r\n     * @param {HTMLElement} el - Element to remove all `src` attributes\r\n     */\r\n    const removeSources = function setVideoSources (el) {\r\n      const sources = el.querySelectorAll('src')\r\n\r\n      if (sources) {\r\n        Array.prototype.forEach.call(sources, function (source) {\r\n          source.setAttribute('src', '')\r\n        })\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Update Config\r\n     *\r\n     */\r\n    const updateConfig = function updateConfig () {\r\n      if (config.draggable && groups[activeGroup].elementsLength > 1 && !groups[activeGroup].slider.classList.contains('tobi__slider--is-draggable')) {\r\n        groups[activeGroup].slider.classList.add('tobi__slider--is-draggable')\r\n      }\r\n\r\n      // Hide buttons if necessary\r\n      if (!config.nav || groups[activeGroup].elementsLength === 1 || (config.nav === 'auto' && isTouchDevice())) {\r\n        prevButton.setAttribute('aria-hidden', 'true')\r\n        nextButton.setAttribute('aria-hidden', 'true')\r\n      } else {\r\n        prevButton.setAttribute('aria-hidden', 'false')\r\n        nextButton.setAttribute('aria-hidden', 'false')\r\n      }\r\n\r\n      // Hide counter if necessary\r\n      if (!config.counter || groups[activeGroup].elementsLength === 1) {\r\n        counter.setAttribute('aria-hidden', 'true')\r\n      } else {\r\n        counter.setAttribute('aria-hidden', 'false')\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Update slider\r\n     */\r\n    const updateSlider = function updateSlider () {\r\n      for (let name in groups) { // const name don't work in IE\r\n        if (!Object.prototype.hasOwnProperty.call(groups, name)) continue\r\n        groups[name].slider.style.display = activeGroup === name ? 'block' : 'none'\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Update lightbox\r\n     *\r\n     * @param {string} dir - Current slide direction\r\n     */\r\n    const updateLightbox = function updateLightbox (dir) {\r\n      updateSlider()\r\n      updateOffset()\r\n      updateCounter()\r\n      updateFocus(dir)\r\n    }\r\n\r\n    /**\r\n     * Destroy Tobi\r\n     *\r\n     * @param {function} callback - Optional callback to call after destroy\r\n     */\r\n    const destroy = function destroy (callback) {\r\n      if (isOpen()) {\r\n        close()\r\n      }\r\n\r\n      // TODO Cleanup\r\n      const groupsEntries = Object.entries(groups)\r\n\r\n      Array.prototype.forEach.call(groupsEntries, function (groupsEntrie) {\r\n        const els = groupsEntrie[1].gallery\r\n\r\n        Array.prototype.forEach.call(els, function (el) {\r\n          remove(el)\r\n        })\r\n      })\r\n\r\n      lightbox.parentNode.removeChild(lightbox)\r\n\r\n      groups = {}\r\n      newGroup = activeGroup = null\r\n      figcaptionId = 0\r\n\r\n      // TODO\r\n\r\n      if (callback) {\r\n        callback.call(this)\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Check if Tobi is open\r\n     *\r\n     */\r\n    const isOpen = function isOpen () {\r\n      return lightbox.getAttribute('aria-hidden') === 'false'\r\n    }\r\n\r\n    /**\r\n     * Detect whether device is touch capable\r\n     *\r\n     */\r\n    const isTouchDevice = function isTouchDevice () {\r\n      return 'ontouchstart' in window\r\n    }\r\n\r\n    /**\r\n     * Checks whether element's nodeName is part of array\r\n     *\r\n     */\r\n    const isIgnoreElement = function isIgnoreElement (el) {\r\n      return ['TEXTAREA', 'OPTION', 'INPUT', 'SELECT'].indexOf(el.nodeName) !== -1 || el === prevButton || el === nextButton || el === closeButton || groups[activeGroup].elementsLength === 1\r\n    }\r\n\r\n    /**\r\n     * Return current index\r\n     *\r\n     */\r\n    const currentSlide = function currentSlide () {\r\n      return groups[activeGroup].currentIndex\r\n    }\r\n\r\n    /**\r\n     * Return current group\r\n     *\r\n     */\r\n    const currentGroup = function currentGroup () {\r\n      return activeGroup !== null ? activeGroup : newGroup\r\n    }\r\n\r\n    /**\r\n     * Select a specific group\r\n     *\r\n     * @param {string} name\r\n     */\r\n    const selectGroup = function selectGroup (name) {\r\n      if (isOpen()) {\r\n        throw new Error('Ups, I can\\'t do this. Tobi is open.')\r\n      }\r\n\r\n      if (!name) {\r\n        return\r\n      }\r\n\r\n      if (name && !Object.prototype.hasOwnProperty.call(groups, name)) {\r\n        throw new Error('Ups, I don\\'t have a group called \"' + name + '\".')\r\n      }\r\n\r\n      activeGroup = name\r\n    }\r\n\r\n    init(userOptions)\r\n\r\n    return {\r\n      open: open,\r\n      prev: prev,\r\n      next: next,\r\n      close: close,\r\n      add: checkDependencies,\r\n      remove: remove,\r\n      destroy: destroy,\r\n      isOpen: isOpen,\r\n      currentSlide: currentSlide,\r\n      selectGroup: selectGroup,\r\n      currentGroup: currentGroup\r\n    }\r\n  }\r\n\r\n  return Tobi\r\n}))\r\n","/**\n * Aucor Navigation.js\n * -------------------\n *\n * Features:\n * - only adds classes, no show() or hide()\n * - timer for hover exit: better usability\n * - works with keyboard: a11y\n * - desktop menu with touch: doubletap\n * - mobile menu with touch\n * - works at least with 3 levels (probably more)\n *\n */\nvar component_dropdown_menu = function(args) {\n\n  var extend = function (defaults, args) {\n    var extended = {};\n    var prop;\n    for (prop in defaults) {\n        if (Object.prototype.hasOwnProperty.call(defaults, prop)) {\n            extended[prop] = defaults[prop];\n        }\n    }\n    for (prop in args) {\n        if (Object.prototype.hasOwnProperty.call(args, prop)) {\n            extended[prop] = args[prop];\n        }\n    }\n    return extended;\n  };\n\n  // Default settings\n  var defaults = {\n    desktop_min_width: 501,\n    menu: document.querySelector('.primary-navigation')\n  };\n\n  var settings          = extend(args),\n      desktop_min_width = settings.desktop_min_width, // match this to $menu-visible SASS variable\n      menu              = settings.menu,\n      screen_w,\n      hover_timer,\n      focus_timer;\n\n  if (!menu) {\n    console.log('Invalid menu or menu_toggle');\n    return;\n  }\n\n  /**\n   * Is desktop menu\n   *\n   * Checks if window is wider than set desktop limit.\n   *\n   * @return bool is desktop width screen\n   */\n  function is_desktop_menu() {\n\n    screen_w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    if(screen_w < desktop_min_width) {\n      return false;\n    }\n    return true;\n\n  }\n\n  /**\n   * Hover timer (only for desktop menus)\n   *\n   * Keeps sub-menu open for a small time when hover has left the element.\n   */\n  var open_sub_menu = function(e) {\n\n    if (is_desktop_menu()) {\n\n      // clear timer\n      clearTimeout(hover_timer);\n\n      // make sure hover_timer did it's thing even if it didn't have time to fire\n      // -> close all .sub-menus that don't belong to this DOM tree\n      var this_tree_submenus = [];\n\n      // get submenus on tree parents\n      var current_parent = this.parentElement;\n      while (!current_parent.isEqualNode(menu)) {\n        if (current_parent.classList.contains('sub-menu')) {\n            this_tree_submenus.push(current_parent);\n        }\n        current_parent = current_parent.parentElement;\n      }\n\n      // get submenus on tree descendants\n      var current_descendants = this.querySelectorAll('.sub-menu');\n      for (var d = 0; d < current_descendants.length; d++) {\n        this_tree_submenus.push(current_descendants[d]);\n      }\n\n      // fetch all open submenus\n      var all_open_sub_menus = menu.querySelectorAll('.open');\n      for (var j = 0; j < all_open_sub_menus.length; j++) {\n        // close the submenu only if not in current tree\n        if (this_tree_submenus.indexOf(all_open_sub_menus[j]) === -1) {\n          all_open_sub_menus[j].classList.remove('open');\n        }\n      }\n\n      // open child sub-menu\n      if (this.querySelector('.sub-menu')) {\n        this.querySelector('.sub-menu').classList.add('open');\n      }\n\n    }\n\n  };\n\n  /**\n   * Close menu when hover timer has ended (only for desktop menus)\n   *\n   * Triggers when mouse leaves menu element.\n   */\n  var close_sub_menu = function(e) {\n    var t = this;\n    // create timeout that let's the cursor get outside of menu for a moment\n    if (is_desktop_menu()) {\n      hover_timer = setTimeout( function() {\n        var parent = t.parentElement;\n        while (!parent.isEqualNode(menu)) {\n          parent.classList.remove('open');\n          parent = parent.parentElement;\n        }\n        if (t.querySelector('.open')) {\n          t.querySelector('.open').classList.remove('open');\n        }\n      }, 750 );\n    }\n  };\n\n  var open_submenu_with_click = function(e) {\n\n    var li = null;\n    var parent = e.target.parentElement;\n    while (!parent.isEqualNode(menu)) {\n      if (parent.classList.contains('menu-item')) {\n        li = parent;\n        break;\n      }\n      parent = parent.parentElement;\n    }\n\n    // toggle .open class to child .sub-menu\n    li.querySelector('.sub-menu').classList.toggle('open');\n\n    // toggle .active class to this <li>\n    if (!is_desktop_menu()) {\n      li.classList.toggle('active');\n    }\n\n    // don't trigger parent(s)\n    e.stopPropagation();\n  };\n\n  var items_with_children = menu.querySelectorAll('.menu-item-has-children');\n  for (var i = 0; i < items_with_children.length; i++) {\n    var item = items_with_children[i];\n    item.addEventListener('mouseover', open_sub_menu);\n    item.addEventListener('mouseleave', close_sub_menu);\n\n    var caret = item.querySelector('.js-menu-caret');\n    if (caret) {\n\n      /* Open sub-menu with click to <button>\n      ----------------------------------------------- */\n      caret.addEventListener('click', open_submenu_with_click);\n\n    }\n\n  }\n\n  /* Keyboard (tab)\n  ----------------------------------------------- */\n  var on_link_focus = function(e) {\n    // open sub-menu below\n    var submenu_below = e.target.parentElement.querySelector('.sub-menu');\n    if (submenu_below) {\n      submenu_below.classList.add('open');\n    }\n\n    // open all sub-menus above\n    var parent = e.target.parentElement;\n    while (!parent.isEqualNode(menu)) {\n      if (parent.classList.contains('sub-menu')) {\n        parent.classList.add('open');\n      }\n      parent = parent.parentElement;\n    }\n  };\n\n  var on_link_blur = function(e) {\n    // close sub-menu below\n    var submenu_below = e.target.parentElement.querySelector('.sub-menu');\n    if (submenu_below) {\n      submenu_below.classList.remove('open');\n    }\n\n    // close all sub-menus above\n    var parent = e.target.parentElement;\n    while (!parent.isEqualNode(menu)) {\n      if (parent.classList.contains('sub-menu')) {\n        parent.classList.remove('open');\n      }\n      parent = parent.parentElement;\n    }\n  };\n\n  var links = menu.querySelectorAll('a');\n  for (var k = 0; k < links.length; k++) {\n    var link = links[k];\n\n    link.addEventListener('focus', on_link_focus);\n    link.addEventListener('blur', on_link_blur);\n  }\n\n  /* Empty links \"#\": open sub-menu\n  ----------------------------------------------- */\n\n//  $menu.find('a[href=\"#\"]').click(function(e) {\n//\n//    // don't go to \"#\"\n//    e.preventDefault();\n//\n//    // do the same stuff as clicking to .menu-item-has-children\n//    $(this).parent('.menu-item-has-children').trigger('click');\n//\n//  });\n\n\n  /* Touch + desktop menu: doubletap\n  ----------------------------------------------- */\n\n  var touchStartFn;\n  var maybeCloseMenuFn;\n\n  if ('ontouchstart' in window) {\n\n    var findAndRemoveClass = function(container, className) {\n      var elements = container.querySelectorAll('.' + className);\n      for(var e = 0; e < elements.length; e++) {\n        elements[e].classList.remove(className);\n      }\n    };\n\n    var targetInsideMenu = function(elem) {\n      var isInsideMenu = false;\n      while ((elem = elem.parentElement) !== null) {\n        if (elem.nodeType !== Node.ELEMENT_NODE) {\n          continue;\n        }\n        if (elem.isEqualNode(menu)) {\n          isInsideMenu = true;\n        }\n      }\n      return isInsideMenu;\n    };\n\n    // maybe close menu after it has been opened by tap\n    maybeCloseMenuFn = function(e) {\n\n      // if the target of the tap isn't menu nor a descendant of menu\n      if (menu !== e.target && !targetInsideMenu(e.target) && is_desktop_menu()) {\n\n        // reset menu state to default\n        findAndRemoveClass(menu, 'open');\n        findAndRemoveClass(menu, 'tapped');\n        findAndRemoveClass(menu, 'active');\n      }\n\n      // remove this event listener\n      document.removeEventListener(\"ontouchstart\", maybeCloseMenuFn, false);\n\n    };\n\n    touchStartFn = function(e) {\n      // only fire on desktop menu\n      if (!is_desktop_menu()) {\n        return false;\n      }\n\n      var current_list_item = this.parentElement;\n      var current_parent;\n\n      if (!current_list_item.classList.contains('tapped')) {\n\n        // first tap: don't go to <a> yet\n        e.preventDefault();\n\n        // remove .tapped class to <li> that don't belong to this DOM tree\n        var this_parents_li = [];\n        current_parent = current_list_item;\n        while(!current_parent.isEqualNode(menu)) {\n          if(current_parent.classList.contains('tapped')) {\n            this_parents_li.push(current_parent);\n          }\n          current_parent = current_parent.parentElement;\n        }\n        var all_tapped = menu.querySelectorAll('.tapped');\n        for (var j = 0; j < all_tapped.length; j++) {\n          // Close the submenu only if not in current tree\n          if (this_parents_li.indexOf(all_tapped[j]) === -1) {\n            all_tapped[j].classList.remove('tapped');\n          }\n        }\n\n        // add .tapped class to <li> element\n        current_list_item.classList.add('tapped');\n\n        // close all .sub-menus that don't belong to this DOM tree\n        var this_parents_submenu = [];\n        current_parent = current_list_item;\n        while (!current_parent.isEqualNode(menu)) {\n          if (current_parent.classList.contains('open')) {\n            this_parents_submenu.push(current_parent);\n          }\n          current_parent = current_parent.parentElement;\n        }\n        var all_open_submenus = menu.querySelectorAll('.open');\n        for (var t = 0; t < all_open_submenus.length; t++) {\n          // Close the submenu only if not in current tree\n          if (this_parents_submenu.indexOf(all_open_submenus[t]) === -1) {\n            all_open_submenus[t].classList.remove('open');\n          }\n        }\n\n        // open .sub-menu below\n        if (current_list_item.querySelector('.sub-menu')) {\n          current_list_item.querySelector('.sub-menu').classList.add('open');\n        }\n\n        // open all .sub-menus above\n        current_parent = this.parentElement;\n        while (!current_parent.isEqualNode(menu)) {\n          if (current_parent.classList.contains('sub-menu')) {\n              current_parent.classList.add('open');\n          }\n          current_parent = current_parent.parentElement;\n        }\n\n        // add EventListener to second click\n        document.addEventListener('touchstart', maybeCloseMenuFn, false);\n\n      } else {\n\n        // second tap: go to <a>\n\n        // remove .tapped from current <li>\n        current_list_item.classList.remove('tapped');\n\n        // close .sub-menus\n        findAndRemoveClass(menu, 'open');\n\n      }\n\n    };\n\n    // add eventlisteners for each <a> with a sub-menu\n    var parent_links = menu.querySelectorAll('.menu-item-has-children > a');\n    for (var p = 0; p < parent_links.length; p++) {\n      parent_links[p].addEventListener('touchstart', touchStartFn, false);\n    }\n\n  }\n\n  // make the call chainable\n  return this;\n};\n","/**\n * Toggle button\n */\n\n\nvar component_toggle = function(toggle) {\n\n  toggle.addEventListener('click', function() {\n\n    var all_toggles = document.querySelectorAll('.js-menu-toggle');\n\n\n    if (toggle.classList.contains('menu-toggle--active')) {\n\n      // remove .active class from hamburger icon\n      for (var i = 0; i < all_toggles.length; i++) {\n        all_toggles[i].classList.remove('menu-toggle--active');\n      }\n\n      // remove .active class to menu container\n      document.body.classList.add('is-closing-menu');\n      setTimeout(function(){\n        document.body.classList.remove('is-active-menu');\n        document.body.classList.remove('is-closing-menu');\n       }, 250);\n\n      // focus out of the menu\n      toggle.dispatchEvent(new Event('focus'));\n\n    } else {\n\n      // remove .active class from hamburger icon\n      for (var i = 0; i < all_toggles.length; i++) {\n        all_toggles[i].classList.add('menu-toggle--active');\n      }\n\n      // .active class to menu container\n      document.body.classList.add('is-active-menu');\n\n    }\n  });\n\n  // make the call chainable\n  return this;\n\n};\n","/**\n * Content markup enhancements\n */\n\n/**\n * Add identifiers for first and last block\n */\nvar gutenberg_content = document.querySelector('.wysiwyg');\nif (gutenberg_content) {\n  for (var i = 0; i < gutenberg_content.childNodes.length; i++) {\n    if (gutenberg_content.childNodes[i].nodeType !== 3 && gutenberg_content.childNodes[i].classList !== \"undefined\") {\n      gutenberg_content.childNodes[i].classList.add('is-first-block');\n      break;\n    }\n  }\n  for (var i = (gutenberg_content.childNodes.length - 1); i >= 0; i--) {\n    if (gutenberg_content.childNodes[i].nodeType !== 3 && gutenberg_content.childNodes[i].classList !== \"undefined\") {\n      gutenberg_content.childNodes[i].classList.add('is-last-block');\n      break;\n    }\n  }\n}\n\n/**\n * Make tables responsive\n */\nvar responsive_tables_in_content = function() {\n\n  var tables = document.querySelectorAll('.wysiwyg .wp-block-table');\n  if (tables) {\n    for (var i = 0; i < tables.length; i++) {\n\n      // add modifier class to affected table\n      tables[i].classList.add('wp-block-table--responsive');\n\n      // create new wrapper\n      var wrapper = document.createElement('div');\n\n      // take all classes from table\n      wrapper.setAttribute('class', tables[i].getAttribute('class'));\n\n      // reset table classes\n      tables[i].removeAttribute('class');\n\n      // wrap the table\n      tables[i].parentNode.insertBefore(wrapper, tables[i]);\n      wrapper.appendChild(tables[i]);\n\n    }\n  }\n\n};\nresponsive_tables_in_content();\n\n/**\n * Classic Editor image markup \"polyfill\"\n *\n * Wrap old images with captions to make alignment work and markup fit Gutenberg style\n * <figure class=\"wp-caption\"><img></figure> => <div class=\"wp-block-image\"><figure class=\"wp-caption\"><img></figure></div>\n */\nvar wrap_old_images_with_caption = function() {\n  var figures = document.querySelectorAll('.wysiwyg .wp-caption');\n  if (figures.length) {\n    for (var i = 0; i < figures.length; i++) {\n      if (!figures[i].parentNode.classList.contains('wp-block-image')) {\n        var wrapper = document.createElement('div');\n        wrapper.setAttribute('class', 'wp-block-image');\n        figures[i].parentNode.insertBefore(wrapper, figures[i]);\n        wrapper.appendChild(figures[i]);\n      }\n    }\n  }\n};\nwrap_old_images_with_caption();\n\n/**\n * Classic Editor aligned image markup \"polyfill\"\n *\n * Wrap old aligned images without caption to make markup fit Gutenberg style\n * <p><img class=\"alignleft\">Text<p> => <div class=\"wp-block-image\"><figure class=\"alignleft\"><img></figure></div><p>Text</p>\n */\nvar wrap_old_aligned_images = function() {\n  var aligned_parent;\n  var aligned = document.querySelectorAll('.wysiwyg img.alignleft, .wysiwyg img.alignright');\n  if (aligned.length) {\n    for (var i = 0; i < aligned.length; i++) {\n\n      // save references\n      aligned_parent = aligned[i].parentNode;\n\n      // if parent is paragraph, unwrap\n      if (aligned_parent.nodeName === 'P') {\n        aligned_parent.parentNode.insertBefore(aligned[i], aligned_parent);\n        // remove paragraph if its now empty\n        if (aligned_parent.childNodes.length === 0) {\n          aligned_parent.parentNode.removeChild(aligned_parent);\n        }\n      }\n\n      // find and remove alignment from img\n      var alignment = (aligned[i].classList.contains('alignleft')) ? 'alignleft' : 'alignright';\n      aligned[i].classList.remove(alignment);\n\n      // wrap with figure\n      var figure = document.createElement('figure');\n      figure.setAttribute('class', alignment);\n      aligned[i].parentNode.insertBefore(figure, aligned[i]);\n      figure.appendChild(aligned[i]);\n\n      // wrap with .wp-block-image\n      var div = document.createElement('div');\n      div.setAttribute('class', 'wp-block-image');\n      figure.parentNode.insertBefore(div, figure);\n      div.appendChild(figure);\n\n    }\n  }\n};\nwrap_old_aligned_images();\n\n/**\n * Lightbox (Tobi.js) support for native gallery and images\n * Requires link to media file from gallery/image settings.\n *\n * Try to find the a-tag parents to the images (the img-tag itself with the last two selectors), both gutenberg and classic editor.\n * Selectors:\n *   gutenberg gallery,\n *   classic gallery,\n *   gutenberg images AND classic images with caption,\n *   classic images without caption and with no or center align,\n *   classic images without caption and with left or right align\n */\nvar imgItems = document.querySelectorAll('.blocks-gallery-item > figure > a, .gallery-item > .gallery-icon > a, .wp-block-image a, p > a > img, p > a > .wp-block-image');\n// if found, add .lightbox class that Tobi uses as selector to the items\nif (imgItems.length) {\n  imgItems.forEach(function(item) {\n    var formats = ['.jpg', '.png', '.jpeg'];\n    // check (3 first selectors) href to verify media link\n    if (item.href) {\n      if (formats.some(el => item.href.includes(el))) {\n        item.classList.add('lightbox');\n      }\n      // check for figcaption (images and gutenberg gallery) and add it to a data attribute\n      if (item.nextElementSibling) {\n        if (item.nextElementSibling.nodeName.toLowerCase() === 'figcaption') {\n          item.dataset.caption = item.nextElementSibling.innerText;\n        }\n      } else if (item.parentNode.nextElementSibling) { // classic gallery\n        if (item.parentNode.nextElementSibling.nodeName.toLowerCase() === 'figcaption') {\n          item.dataset.caption = item.parentNode.nextElementSibling.innerText;\n        }\n      }\n    } else if (item.parentNode.href) { // check (2 last selectors) href to verify media link\n      if (formats.some(el => item.parentNode.href.includes(el))) {\n        item.parentNode.classList.add('lightbox');\n      }\n    }\n  });\n}\n","/* ==========================================================================\n  main.js\n========================================================================== */\n\n/**\n * Init menus\n */\nvar menus = document.querySelectorAll('.js-navigation');\nfor (var i = 0; i < menus.length; i++) {\n  component_dropdown_menu({\n    desktop_min_width: 890,\n    menu: menus[i]\n  });\n}\n\n/**\n * Init menu-toggles\n */\nvar menu_toggles = document.querySelectorAll('.js-menu-toggle');\nfor (var i = 0; i < menu_toggles.length; i++) {\n  component_toggle(menu_toggles[i]);\n}\n\n/**\n * Mobile menu out-of-bounds\n */\nvar menu_out_of_bounds = document.querySelector('.js-mobile-menu__close');\nif (menu_out_of_bounds && menu_toggles.length) {\n  menu_out_of_bounds.addEventListener('click', function(e) {\n    menu_toggles[0].click();\n  });\n}\n\n/**\n * Responsive videos\n */\nfitvids();\n\n/**\n * Polyfill object-fit for lazyloaded\n */\nif (typeof objectFitPolyfill === \"function\") {\n  document.addEventListener('lazybeforeunveil', function(e){\n    objectFitPolyfill();\n    e.target.addEventListener('load', function() {\n      objectFitPolyfill();\n    });\n  });\n}\n\n/**\n * Lightbox\n */\nif(document.querySelectorAll('.lightbox').length) {\n  // init Tobi\n  try {\n    const tobi = new Tobi({\n      // variables from script localization in register-assets.php\n      navLabel: [aucor_starter_strings.prev, aucor_starter_strings.next],\n      closeLabel: aucor_starter_strings.close,\n      loadingIndicatorLabel: aucor_starter_strings.loading,\n      captionsSelector: 'self',\n      captionAttribute: 'data-caption',\n      zoom: false,\n  });\n  } catch (e) {\n    console.log(e);\n  }\n}\n"],"sourceRoot":"assets/scripts/"}